<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />

    <script charset="utf-8" src="https://d3js.org/d3.v4.min.js"></script>
    <script charset="utf-8" src="https://cdnjs.cloudflare.com/ajax/libs/dimple/2.3.0/dimple.latest.min.js"></script>
    <style>
        #chartContainer {
            width: 1000px;
            margin: auto;
            margin-top: -5px;
            margin-left: -5px;
            margin-bottom: -10px;
            font-size: 50;
        }


        #charttitle {
            font: bold 15px Verdana, sans-serif;
        }

        svg text {
            font-size: 2em;
        }
    </style>
</head>

<body>


    <div id="chartContainer">
    </div>

</body>

<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<script>
    // set the dimensions and margins of the graph

    var width = 2000
    var height = 1000
    var svg = dimple.newSvg("#chartContainer", width, height);
    d3.csv("/glacier_map/all_cleaned.csv", function (data) {

        var filter = new Array()
        for (var i = 0; i < data.length; i++) {
            if (data[i].Region != "Global") {
                test = data[i]
                filter.push(test)
            }
        }

        var myChart = new dimple.chart(svg, filter);


        myChart.setBounds(0.1 * width, 90, 0.4 * width, 0.25 * height);

        var x = myChart.addCategoryAxis("x", "year");
        x.addOrderRule("Date");
        var y = myChart.addMeasureAxis("y", "elevation_change_rate");
        var s = myChart.addSeries("Region", dimple.plot.line);
        s.interpolation = "cardinal";
        x.title = 'Year';
        y.title = 'Mean Elevation Change Rate'
        
        s.addEventHandler("mouseover", function () {});
        s.addEventHandler("mouseleave", function () {});

        myChart.addLegend(0.08 * width, 30, 0.5 * width, 0.25 * height, "right");
        myChart.draw();
        s.shapes.on("click", function (e) {
            dimple._showPointTooltip(e, this, myChart, s);
        })
    });
</script>

</html>